# 狼人杀游戏 - 使用说明

## 快速开始

### 1. 安装依赖

```bash
cd /Users/jinxian/AIproject/wolfkill
pip install -r requirements.txt
```

### 2. 配置环境变量

创建 `.env` 文件：

```bash
cp .env.example .env
```

编辑 `.env` 文件，填入你的配置：

```bash
# DeepSeek API配置（必填）
DEEPSEEK_API_KEY=sk-xxxxxxxxxxxxxxxx
DEEPSEEK_BASE_URL=https://api.deepseek.com/v1

# Redis配置（可选，暂未使用）
REDIS_HOST=175.24.18.121
REDIS_PORT=6379
REDIS_PASSWORD=761291343
REDIS_DB=0
REDIS_EXPIRE_TIME=86400
```

### 3. 运行游戏

```bash
python main.py
```

## 游戏说明

### 游戏配置

- **模式**: 单人 vs AI
- **玩家数量**: 9人（1个真人 + 8个AI）
- **角色配置**: 基础版
  - 狼人 x 3
  - 村民 x 3
  - 预言家 x 1
  - 女巫 x 1
  - 猎人 x 1

### 游戏流程

1. **角色分配**: 游戏开始时，你会被随机分配一个角色
2. **夜晚阶段**:
   - 狼人选择杀人
   - 预言家查验身份
   - 女巫决定用药
3. **白天阶段**:
   - 宣布昨晚死讯
   - 所有存活玩家依次发言
4. **投票阶段**:
   - 投票放逐可疑玩家
5. **胜利条件**:
   - 狼人胜利：狼人数 >= 好人数
   - 好人胜利：所有狼人被消灭

### 操作说明

#### 真人玩家操作

1. **发言**: 直接输入你的发言内容
2. **投票**: 输入序号选择要投票的玩家
3. **夜晚行动** (如果你的角色有特殊能力):
   - 选择目标玩家序号
   - 或选择跳过

#### AI玩家

AI玩家会自动：
- 根据历史对话生成发言
- 基于策略做出投票决策
- 执行角色的夜晚行动

## 角色说明

### 狼人阵营

**狼人**
- 夜晚可以杀死一名玩家
- 目标：消灭所有好人

### 好人阵营

**村民**
- 没有特殊能力
- 通过推理找出狼人

**预言家**
- 每晚可以查验一名玩家的身份
- 引导好人找出狼人

**女巫**
- 拥有一瓶解药（救人）和一瓶毒药（毒人）
- 每晚最多使用一瓶

**猎人**
- 死亡时可以开枪带走一名玩家
- 注意：被女巫毒死不能开枪

## 游戏策略提示

### 作为狼人
- 隐藏身份，不要前后矛盾
- 可以假跳预言家或其他神职
- 分析谁对狼人阵营威胁最大

### 作为预言家
- 选择合适的时机跳出来公布信息
- 注意保护自己
- 引导好人找出狼人

### 作为女巫
- 第一晚不要轻易用解药
- 毒药留给确定的狼人
- 不要暴露身份

### 作为猎人
- 低调行事，不要过早暴露
- 死亡时选择最可疑的玩家开枪

### 作为村民
- 仔细分析每个人的发言
- 寻找逻辑矛盾
- 相信预言家的查验结果

## 当前版本限制

### 已实现
- ✅ 完整的角色系统（策略模式）
- ✅ AI玩家（DeepSeek驱动）
- ✅ 白天发言和投票
- ✅ 历史对话记录
- ✅ 基本游戏流程

### 简化/待完善
- ⚠️ 夜晚行动（当前简化实现）
- ⚠️ Redis存储（暂未启用）
- ⚠️ 更复杂的AI策略
- ⚠️ 彩色UI输出
- ⚠️ 更多角色支持

## 常见问题

### Q: 如何获取 DeepSeek API Key？
A: 访问 https://platform.deepseek.com/ 注册账号并创建API密钥

### Q: 游戏运行出错怎么办？
A:
1. 检查 `.env` 文件配置是否正确
2. 确保安装了所有依赖：`pip install -r requirements.txt`
3. 检查DeepSeek API额度是否充足

### Q: 如何添加新角色？
A: 参考 `roles/` 目录下的现有角色，继承 `BaseRole` 类实现新角色

### Q: AI发言质量不高？
A: 可以调整 `ai/prompts/player_prompts.py` 中的提示词模板

## 技术支持

- 项目地址: `/Users/jinxian/AIproject/wolfkill`
- 详细文档: `README.md`
- 实施计划: `~/.claude/plans/lazy-squishing-stream.md`

## 贡献

欢迎提交Issue和Pull Request来改进游戏！
